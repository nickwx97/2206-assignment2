ğŸ“¦ sockets ğŸ 
ğŸ“¦ files ğŸ 

ğŸ’­ Name & filepath definitions
ğŸ‡ğŸ˜±ğŸ‡
	ğŸ‡â— ğŸ“› â¡ ğŸ”¡ğŸ‡
		â†© ğŸ”¤emojicode-httpdğŸ”¤ ğŸ’­server name
	ğŸ‰

	ğŸ‡â— ğŸ‘¹ â¡ ğŸ”¡ğŸ‡
		â†© ğŸ”¤webroot/404.htmlğŸ”¤ ğŸ’­fancy 404
	ğŸ‰

	ğŸ‡â— ğŸŒ³ â¡ ğŸ”¡ğŸ‡
		â†© ğŸ”¤webrootğŸ”¤ ğŸ’­webpage root directory
	ğŸ‰
ğŸ‰

ğŸ’­non-HEAD responses
ğŸ‡ ğŸ•¸ ğŸ‡

	ğŸ‡â— ğŸ˜ clientSocket ğŸ“ readFile ğŸ“‡ ğŸ‡
		ğŸ˜€ğŸ”¤200 OKğŸ”¤â—
		ğŸ“readFileâ“â¡conlen
		ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 200 OKâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnContent-Length: ğŸ§²conlenğŸ§²âŒrâŒnCache-Control: max-age=3600âŒrâŒnConnection: closeâŒrâŒnâŒrâŒnğŸ”¤â— â• readFileâ—ï¸
	ğŸ‰

	ğŸ‡â— ğŸ˜  clientSocket ğŸ“ğŸ‡
		ğŸ˜€ğŸ”¤404 Not FoundğŸ”¤â—
		ğŸ†— errpage ğŸ“‡ğŸ‡ğŸ“„ğŸ‘¹ğŸ‡ğŸ˜±â—â— ğŸ‡
			ğŸ“errpageâ“ â¡ conlen
			ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 404 Not FoundâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnContent-Length: ğŸ§²conlenğŸ§²âŒrâŒnConnection: closeâŒrâŒnâŒrâŒnğŸ”¤â— â• errpageâ—
		ğŸ‰
		ğŸ™…â€â™€ï¸ error ğŸ‡
			ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
			ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 404 Not FoundâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnContent-Length: 49âŒrâŒnConnection: closeâŒrâŒnâŒrâŒnUhh... 404 page... 404? That's even more awkward.ğŸ”¤â—â—
		ğŸ‰
	ğŸ‰

	ğŸ‡â— ğŸ¤¹â€â™€ï¸ clientSocketğŸ“ğŸ‡
		ğŸ˜€ğŸ”¤200 OKğŸ”¤â—
		ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 200 OKâŒrâŒnConnection: closeâŒrâŒnAllow: OPTIONS, GET, HEADâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnâŒrâŒnğŸ”¤â—â—
	ğŸ‰

	ğŸ’­Not sure if 405 Method Not Allowed or 501 Not Implemented is more appropriate...
	ğŸ‡â— ğŸ¤« clientSocketğŸ“ğŸ‡
		ğŸ˜€ğŸ”¤501 Not ImplementedğŸ”¤â—
		ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 501 Not ImplementedâŒrâŒnConnection: closeâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnâŒrâŒnğŸ”¤â—â—

		ğŸ’­ğŸ˜€ğŸ”¤405 Method Not AllowedğŸ”¤â—
		ğŸ’­ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 405 Method Not AllowedâŒrâŒnConnection: closeâŒrâŒnAllow: OPTIONS, GET, HEADâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnâŒrâŒnğŸ”¤â—â—
	ğŸ‰

	ğŸ‡â— ğŸ¥ data ğŸ“‡ â¡ ğŸ”¡ğŸ‡
		â†©ğŸ½ğŸ”«ğŸ½ğŸ”«ğŸºğŸ”¡dataâ— ğŸ”¤Host: ğŸ”¤â— 1â— ğŸ”¤âŒrâŒnğŸ”¤â— 0â—
	ğŸ‰
ğŸ‰

ğŸ’­HEAD responses
ğŸ‡ ğŸ—£ ğŸ‡

	ğŸ‡â— ğŸ˜ clientSocket ğŸ“ readFile ğŸ“‡ ğŸ‡
		ğŸ˜€ğŸ”¤HEAD 200 OKğŸ”¤â—
		ğŸ“readFileâ“â¡conlen
		ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 200 OKâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnContent-Length: ğŸ§²conlenğŸ§²âŒrâŒnCache-Control: max-age=3600âŒrâŒnConnection: closeâŒrâŒnâŒrâŒnğŸ”¤â—â—ï¸
	ğŸ‰

	ğŸ‡â— ğŸ˜  clientSocket ğŸ“ğŸ‡
		ğŸ˜€ğŸ”¤HEAD 404 Not FoundğŸ”¤â—
		ğŸ†— errpage ğŸ“‡ğŸ‡ğŸ“„ğŸ‘¹ğŸ‡ğŸ˜±â—â— ğŸ‡
			ğŸ“errpageâ“ â¡ conlen
			ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 404 Not FoundâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnContent-Length: ğŸ§²conlenğŸ§²âŒrâŒnConnection: closeâŒrâŒnâŒrâŒnğŸ”¤â—â—
		ğŸ‰
		ğŸ™…â€â™€ï¸ error ğŸ‡
			ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
			ğŸº ğŸ’¬ clientSocket ğŸ“‡ğŸ”¤HTTP/1.1 404 Not FoundâŒrâŒnServer: ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§²âŒrâŒnContent-Length: 49âŒrâŒnConnection: closeâŒrâŒnâŒrâŒnğŸ”¤â—â—
		ğŸ‰
	ğŸ‰

ğŸ‰

ğŸ’­request "server"(haha tennis) aka handler
ğŸ‡ğŸ¥ğŸ‡

	ğŸ‡â— ğŸ¾ clientSocket ğŸ“ dirbytes ğŸ“‡ data ğŸ“‡ ğŸ‡
		ğŸ”¡ğŸ“dataâ“â— â¡ length
		ğŸ˜€ğŸºğŸ”¡ dataâ—ï¸â—ï¸
		â†ªğŸºğŸ”¡ğŸ”ªdata 0 3â—â— ğŸ™Œ ğŸ”¤GETğŸ”¤ğŸ‡ ğŸ’­Process GET
			ğŸ”data ğŸ“‡ğŸ”¤âŒrâŒnğŸ”¤â— 0â— â¡ offset
			ğŸ”ªdata 0 ğŸºoffsetâ— â¡ requestline
			ğŸºğŸ”¡requestlineâ— â¡ asciirequestline
			ğŸ”«asciirequestline ğŸ”¤ ğŸ”¤â— â¡ requestlist
			ğŸ½requestlist 1â— â¡ dir
			dirbytes â• ğŸ“‡dirâ— â¡fp
			â†ªâ›³dir ğŸ”¤/ğŸ”¤â—ï¸ğŸ‡
				ğŸ†— readFile ğŸ“‡ğŸ‡ğŸ“„ ğŸ”¤ğŸ§²ğŸºğŸ”¡fpâ—ğŸ§²index.htmlğŸ”¤ â— ğŸ‡
					ğŸ˜ğŸ‡ğŸ•¸ clientSocket readFile â—

					ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
					â†©â†©
				ğŸ‰
				ğŸ™…â€â™€ï¸ error ğŸ‡
					ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
					ğŸ˜ ğŸ‡ğŸ•¸ clientSocketâ—

					ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
					â†©â†©
				ğŸ‰
			ğŸ‰
			ğŸ•°ğŸ‡ğŸ’»â—â¡epoch
			ğŸ•´ğŸ‡ğŸ’»ğŸ”¤echo -n $(file -b ğŸ§²ğŸºğŸ”¡fpâ—ğŸ§²) > ğŸ§²epochğŸ§².lockğŸ”¤ â—
			ğŸ†—isDirğŸ“‡ğŸ‡ğŸ“„ğŸ”¤ğŸ§²epochğŸ§².lockğŸ”¤â— ğŸ‡
				â†ªğŸºğŸ”¡isDirâ—ğŸ™ŒğŸ”¤directoryğŸ”¤ğŸ‡
					ğŸ˜ ğŸ‡ğŸ•¸ clientSocketâ—
					ğŸ•´ğŸ‡ğŸ’»ğŸ”¤rm ğŸ§²epochğŸ§².lock > /dev/nullğŸ”¤ â—
					ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
					â†©â†©
				ğŸ‰
			ğŸ‰
			ğŸ™…â€â™€ï¸errorğŸ‡
				ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
			ğŸ‰
			ğŸ•´ğŸ‡ğŸ’»ğŸ”¤rm ğŸ§²epochğŸ§².lock > /dev/nullğŸ”¤ â—
			ğŸ†— readFile ğŸ“‡ğŸ‡ğŸ“„ ğŸºğŸ”¡fpâ— â— ğŸ‡
				ğŸ˜ğŸ‡ğŸ•¸ clientSocket readFile â—

				ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
				â†©â†©
			ğŸ‰
			ğŸ™…â€â™€ï¸ error ğŸ‡
				ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
				ğŸ˜ ğŸ‡ğŸ•¸ clientSocketâ—

				ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
				â†©â†©
			ğŸ‰
		ğŸ‰
		ğŸ™…â€â™€ï¸â†ªğŸºğŸ”¡ğŸ”ªdata 0 7â—â— ğŸ™Œ ğŸ”¤OPTIONSğŸ”¤ğŸ‡ ğŸ’­Process OPTIONS
			ğŸ¤¹â€â™€ï¸ğŸ‡ğŸ•¸ clientSocketâ—
		ğŸ‰
		ğŸ™…â€â™€ï¸â†ªğŸºğŸ”¡ğŸ”ªdata 0 4â—â— ğŸ™Œ ğŸ”¤HEADğŸ”¤ğŸ‡ ğŸ’­Process HEAD
			ğŸ”data ğŸ“‡ğŸ”¤âŒrâŒnğŸ”¤â— 0â— â¡ offset
			ğŸ”ªdata 0 ğŸºoffsetâ— â¡ requestline
			ğŸºğŸ”¡requestlineâ— â¡ asciirequestline
			ğŸ”«asciirequestline ğŸ”¤ ğŸ”¤â— â¡ requestlist
			ğŸ½requestlist 1â— â¡ dir
			dirbytes â• ğŸ“‡dirâ— â¡fp
			â†ªâ›³dir ğŸ”¤/ğŸ”¤â—ï¸ğŸ‡
				ğŸ†— readFile ğŸ“‡ğŸ‡ğŸ“„ ğŸ”¤ğŸ§²ğŸºğŸ”¡fpâ—ğŸ§²index.htmlğŸ”¤ â— ğŸ‡
					ğŸ˜ğŸ‡ğŸ—£ clientSocket readFile â—

					ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
					â†©â†©
				ğŸ‰
				ğŸ™…â€â™€ï¸ error ğŸ‡
					ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
					ğŸ˜ ğŸ‡ğŸ—£ clientSocketâ—

					ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
					â†©â†©
				ğŸ‰
			ğŸ‰
			ğŸ•°ğŸ‡ğŸ’»â—â¡epoch
			ğŸ•´ğŸ‡ğŸ’»ğŸ”¤echo -n $(file -b ğŸ§²ğŸºğŸ”¡fpâ—ğŸ§²) > ğŸ§²epochğŸ§².lockğŸ”¤ â—
			ğŸ†—isDirğŸ“‡ğŸ‡ğŸ“„ğŸ”¤ğŸ§²epochğŸ§².lockğŸ”¤â— ğŸ‡
				â†ªğŸºğŸ”¡isDirâ—ğŸ™ŒğŸ”¤directoryğŸ”¤ğŸ‡
					ğŸ˜ ğŸ‡ğŸ—£ clientSocketâ—
					ğŸ•´ğŸ‡ğŸ’»ğŸ”¤rm ğŸ§²epochğŸ§².lock > /dev/nullğŸ”¤ â—
					ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
					â†©â†©
				ğŸ‰
			ğŸ‰
			ğŸ™…â€â™€ï¸errorğŸ‡
				ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
			ğŸ‰
			ğŸ•´ğŸ‡ğŸ’»ğŸ”¤rm ğŸ§²epochğŸ§².lock > /dev/nullğŸ”¤ â—
			ğŸ†— readFile ğŸ“‡ğŸ‡ğŸ“„ ğŸºğŸ”¡fpâ— â— ğŸ‡
				ğŸ˜ğŸ‡ğŸ—£ clientSocket readFile â—

				ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
				â†©â†©
			ğŸ‰
			ğŸ™…â€â™€ï¸ error ğŸ‡
				ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
				ğŸ˜ ğŸ‡ğŸ—£ clientSocketâ—

				ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
				â†©â†©
			ğŸ‰
		ğŸ‰
		ğŸ™…â€â™€ï¸ğŸ‡ ğŸ’­Any other methods, 501
			ğŸ¤«ğŸ‡ğŸ•¸ clientSocketâ—
		ğŸ‰
		ğŸ’­ End of request parsing
		ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
	ğŸ‰
ğŸ‰

ğŸ’­ Simple HTTP server listening on port 8888
ğŸ â¡ï¸ ğŸ”¢ ğŸ‡

	ğŸ•´ğŸ‡ğŸ’»ğŸ”¤SCRIPT=$(pwd); echo -n $SCRIPT > currentdir; chmod 600 currentdirğŸ”¤ â—
	ğŸ“‡ğŸ”¤/ğŸ”¤â—â¡ğŸ–ğŸ†•dirbytes
	ğŸ†—tempdirbytes ğŸ“‡ğŸ‡ğŸ“„ğŸ”¤currentdirğŸ”¤â— ğŸ‡
		tempdirbytesâ•ğŸ“‡ğŸ”¤/ğŸ§²ğŸŒ³ğŸ‡ğŸ˜±â—ğŸ§²ğŸ”¤â—â¡ğŸ–dirbytes
	ğŸ‰
	ğŸ™…â€â™€ï¸errorğŸ‡
		ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
		ğŸšªğŸ‡ğŸ’»-1â—
	ğŸ‰
	ğŸºğŸ†•ğŸ„ 8888â—ï¸ â¡ï¸ server
	ğŸ˜€ğŸ”¤ğŸ§²ğŸ“›ğŸ‡ğŸ˜±â—ğŸ§² StartedâŒnğŸ”¤â—
	ğŸ˜€ğŸ”¤****************************ğŸ”¤â—
	ğŸ”ğŸ‘ğŸ‡
		ğŸº ğŸ™‹ serverâ—ï¸ â¡ï¸ clientSocket
		ğŸ›‚ğŸ†•ğŸ§µ ğŸ‡ ğŸğŸ¥¡
			ğŸ†— data ğŸ‘‚ clientSocket 8192â—ï¸ ğŸ‡ ğŸ’­Read 8192 bytes (max size for HTTP requests)
				ğŸ¾ğŸ‡ğŸ¥clientSocket dirbytes dataâ—
			ğŸ‰ ğŸ™…â€â™€ï¸ error ğŸ‡
				ğŸ˜€ğŸ”¤ğŸ¤¯Error: ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
			ğŸ‰
			ğŸšªclientSocketâ—ï¸
		ğŸ‰â—â—
	ğŸ‰
	ğŸ˜€ğŸ”¤End of server codeâ—â—â—ğŸ”¤â—
	â†© 0

ğŸ‰
